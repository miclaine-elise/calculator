<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="container">
        <div id="screen">
            <text id="equation"></text>
            <text id="input"></text>
        </div>
        <div id="keypad">
            <div id="row1" class="row">
                <button class="function" id="clear">CLEAR</button>
                <button class="function" id="delete">DELETE</button>
            </div>
            <div id="row2" class="row">
                <button class="num">7</button>
                <button class="num">8</button>
                <button class="num">9</button>
                <button class="operator">/</button>
            </div>
            <div id="row3" class="row">
                <button class="num">4</button>
                <button class="num">5</button>
                <button class="num">6</button>
                <button class="operator">x</button>
            </div>
            <div id="row4" class="row">
                <button class="num">1</button>
                <button class="num">2</button>
                <button class="num">3</button>
                <button class="operator">-</button>
            </div>
            <div id="row5" class="row">
                <button class="num">.</button>
                <button class="num">0</button>
                <button class="operator" id="evaluate">=</button>
                <button class="operator">+</button>
            </div>
        </div>
    </div>
    <script>
        let input = document.querySelector("#input");
        let equation = document.querySelector("#equation");
        let num = document.querySelectorAll(".num");
        let operatorBtns = document.querySelectorAll(".operator");
        let evaluateBtn = document.querySelector("#evaluate");
        let clearBtn = document.querySelector("#clear");
        let deleteBtn = document.querySelector("#delete");
        let operator;
        let result;
        let terms;
        let evaluated;
        let operated;

        clearBtn.addEventListener("click", function (event) {
            clearInput();
            clearExpression();
        })
        deleteBtn.addEventListener("click", function (event) {
            input.textContent = input.textContent.slice(0, -1);
        })
        showNumInput();
        function showNumInput() {
            for (let i = 0; i <= num.length - 1; i++) {
                num[i].addEventListener('click', function (event) {
                    if (evaluated === true) {
                        clearInput();
                        clearExpression();
                        evaluated = false;
                    }
                    input.textContent = input.textContent + this.textContent;
                    operated = false;
                });
            }
        }
        function clearInput() {
            input.textContent = "";
        }
        function clearExpression() {
            equation.textContent = "";
        }
        for (let i = 0; i <= operatorBtns.length - 1; i++) {
            operatorBtns[i].addEventListener("click", function (event) {
                console.log(operated);
                if (operated === false) {
                    operated = true;
                    equation.textContent = equation.textContent + input.textContent + this.textContent;
                    let expression = equation.textContent;
                    terms = expression.replace('=', '').replace('+', '#').replace('-', '#').replace('x', '#').replace('/', '#').split('#');
                    if (terms[1] !== '' && this.textContent !== "=") {
                        newOperator = this.textContent;
                        evaluateExpression();
                        operator = newOperator;
                        equation.textContent = result + operator;
                    }
                } else if (this.textContent !== "=") {
                    equation.textContent = equation.textContent.slice(0, -1);
                    operator = this.textContent;
                    equation.textContent = equation.textContent + input.textContent + this.textContent;


                }
                clearInput();
            });
        }
        evaluateBtn.addEventListener("click", function (event) {
            evaluateExpression();
            evaluated = true;
        });
        function evaluateExpression() {
            switch (operator) {
                case operator = "+":
                    result = +terms[0] + +terms[1];
                    break;
                case operator = "-":
                    result = terms[0] - terms[1];
                    break;
                case operator = "x":
                    result = terms[0] * terms[1];
                    break;
                case operator = "/":
                    result = terms[0] / terms[1];
                    break;
            }
            input.textContent = result;
        }

    </script>
</body>

</html>